# 要望
JHispterサイトのドキュメントを、LLMで翻訳し、日本語サイトにする。
- 原文のサイト： jhipster/jhipster.github.io （upstream）
- 日本語サイト： jhipster.github.io-jp （origin）

upstream/main は日々英語の原文による更新がコミットされている。
その内容を日本語に翻訳し origin に反映する。
翻訳処理はLLMを用いて行う。

## 翻訳処理
翻訳処理は、GitHub Actionsにて一定期間ごとの発動により処理する。
- originに翻訳ブランチを作成
- upstreamのコミットされた内容で、originで未翻訳のものを抽出
- 翻訳して、originの翻訳ブランチにコミット
- すべて翻訳したら Pull Requestを作成。PR本文には、syncブランチの更新ファイル名を全て記載する。その差異、更新状態がわかるようにする。
- 人間がチェックしorigin/mainにマージ

### 重要な翻訳処理の条件
- upstreamとoriginのファイルやディレクトリ構成は完全に一致させる
- upstreamとoriginのドキュメントファイルの行数は完全に一致させる
    - 改行の位置を完全に一致させる。例えば、upstreamのファイルの10行目の原文は、origin側のファイルでも10行目の翻訳として反映する
- upstreamの更新された内容により、翻訳方針を分けることに留意する。
    - 翻訳済みファイル対し、さらに原文が更新された場合
        - 翻訳済みをそのまま残し、新たに翻訳された内容を追加する。
        - もしくは、翻訳済みの箇所と新たに翻訳された箇所が重なる場合、両方を考慮し翻訳し直す。
        - 原文が、誤字脱字など原文の意味が変わらない変更の場合は、翻訳対象としない。
    - 文書ファイルでないファイルの場合、翻訳しない。
- 一行単位の翻訳はしない
    - 行数一致を重視するために採用しがちだが、全体の文意の読み取りが大事

## Pull Requestのdescription
人間が翻訳のチェックをするため、descriptionの中で、以下のリンクを並べ、チェックしやすくする
- 原文ドキュメントの変更コミット
- 翻訳ドキュメントのコミット

## 環境
- LLMは、Geminiを用いること。APIキーは持っているが、安全のためGitHub Actions の Secrets に登録する。
- ローカル環境は以下を考慮する
    - GitHub Actions を何回も実行しなくても良いように、可能な限りローカルで動作を確認できる環境を構築する
        - GitHub Actions の yamlに多くを書くのではなく、要望に「ローカル環境でスクリプト実行も実現可能とする」と書いたようにスクリプトで記述するのが望ましい
        - 一つのスクリプトに全ての処理を書くのではなく、役割ごとに複数のスクリプトに分け、動作確認を行いやすくする。

### 開発モードの翻訳処理
ローカルでの単体の動作を行えるようにする。
- 翻訳処理を1件や数件で動作確認できるようにする。upstreamの更新のうち、指定したコミットハッシュ以前の未翻訳を対象として翻訳する。

